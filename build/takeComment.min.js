(function(){var a,b,c,d,e;e=$(window),d=document.getElementById("msg"),a=$(".msg"),c=function(){return $(".submit").html("Ok")},b=function(a){return $.ajax({type:"POST",url:"/1",data:a,success:c,timeout:3e3})},$(function(){var e,f,g,h;return f="",g={width:14,chars_preset:"alpha"},a.keypress(function(a){return 13===a.which?$(".submit").click():void 0}),$("form").submit(function(){return!1}),$(".submit").click(function(){var e,g,h;return a.focus(),f=$(this).attr("datacolor"),g=$("<div>").css({top:$(this).position().top,left:$(this).position().left,position:"absolute",width:$(this).width(),height:$(this).height(),"z-index":10}).appendTo($("#text-box")),g.offset($(this)).offset(),g.addClass("fogstart"),g.addClass("fogend"),window.setTimeout(function(){return g.remove()},1e3),d.value.length>0&&(e=$("<div>").addClass("moveit").appendTo($("#text-box")).css({top:a.position().top,left:a.position().left,position:"absolute",width:a.width(),height:a.height(),padding:"0 20px","font-size":"1.5em","line-height":""+a.height()+"px",border:"1px solid transparent"}),e.text(d.value),setTimeout(function(){return e.addClass("moveit-end")},0),window.setTimeout(function(){return e.remove()},2e3),h={msg:d.value,color:f},b(h,c),d.value="",$(".submit").html("Send...")),!1}),h=$("#station").flapper(g),e={0:"我要上弹幕>.<      ",1:"欢迎甩节操。        ",2:"不许说脏话-_-      ",3:"不许聊天。。        ",4:"来玩Ingress=o=  ",5:"请选绿军。         "},setTimeout(function(){var a;return a=0,setInterval(function(){return h.val(e[a]).change(),++a,a%=6},1e4)},500)})}).call(this),function(a,b,c,d){function e(a){return parseFloat(a)}function f(){var a={transformProperty:"",MozTransform:"-moz-",WebkitTransform:"-webkit-",OTransform:"-o-",msTransform:"-ms-"};for(var b in a)if("undefined"!=typeof n[b])return a[b];return null}function g(){if("undefined"!=typeof b.Modernizr)return Modernizr.csstransforms;var a=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var c in a)if(n[a[c]]!==d)return!0}function h(b,c){var d=k.exec(a.trim(c));if(d[3]&&"px"!==d[3]){var e="paddingBottom",f=a.style(b,e);return a.style(b,e,c),c=i(b,e),a.style(b,e,f),c}return parseFloat(c)}function i(b,c){if(null!=b[c]&&(!b.style||null==b.style[c]))return b[c];var d=parseFloat(a.css(b,c));return d&&d>-1e4?d:0}var j=/progid:DXImageTransform\.Microsoft\.Matrix\(.*?\)/,k=/^([\+\-]=)?([\d+.\-]+)(.*)$/,l=/%/,m=c.createElement("modernizr"),n=m.style,o=f(),p=null!==o?o+"transform":!1,q=null!==o?o+"transform-origin":!1;a.support.csstransforms=g(),"-ms-"==o&&(p="msTransform",q="msTransformOrigin"),a.extend({transform:function(b){b.transform=this,this.$elem=a(b),this.applyingMatrix=!1,this.matrix=null,this.height=null,this.width=null,this.outerHeight=null,this.outerWidth=null,this.boxSizingValue=null,this.boxSizingProperty=null,this.attr=null,this.transformProperty=p,this.transformOriginProperty=q}}),a.extend(a.transform,{funcs:["matrix","origin","reflect","reflectX","reflectXY","reflectY","rotate","scale","scaleX","scaleY","skew","skewX","skewY","translate","translateX","translateY"]}),a.fn.transform=function(b,c){return this.each(function(){var d=this.transform||new a.transform(this);b&&d.exec(b,c)})},a.transform.prototype={exec:function(b,c){return c=a.extend(!0,{forceMatrix:!1,preserve:!1},c),this.attr=null,b=c.preserve?a.extend(!0,this.getAttrs(!0,!0),b):a.extend(!0,{},b),this.setAttrs(b),a.support.csstransforms&&!c.forceMatrix?this.execFuncs(b):a.browser.msie||a.support.csstransforms&&c.forceMatrix?this.execMatrix(b):!1},execFuncs:function(b){var c=[];for(var d in b)"origin"==d?this[d].apply(this,a.isArray(b[d])?b[d]:[b[d]]):-1!==a.inArray(d,a.transform.funcs)&&c.push(this.createTransformFunc(d,b[d]));return this.$elem.css(p,c.join(" ")),!0},execMatrix:function(b){function c(a,b){return l.test(a)?parseFloat(a)/100*k["safeOuter"+(b?"Height":"Width")]():h(i,a)}var d,f,g,i=this.$elem[0],k=this,m=/translate[X|Y]?/,n=[];for(var q in b){switch(a.type(b[q])){case"array":g=b[q];break;case"string":g=a.map(b[q].split(","),a.trim);break;default:g=[b[q]]}a.matrix[q]?(g=a.cssAngle[q]?a.map(g,a.angle.toDegree):a.cssNumber[q]?a.map(g,e):a.map(g,c),f=a.matrix[q].apply(this,g),m.test(q)?n.push(f):d=d?d.x(f):f):"origin"==q&&this[q].apply(this,g)}d=d||a.matrix.identity(),a.each(n,function(a,b){d=d.x(b)});var r=parseFloat(d.e(1,1).toFixed(6)),s=parseFloat(d.e(2,1).toFixed(6)),t=parseFloat(d.e(1,2).toFixed(6)),u=parseFloat(d.e(2,2).toFixed(6)),v=3===d.rows?parseFloat(d.e(1,3).toFixed(6)):0,w=3===d.rows?parseFloat(d.e(2,3).toFixed(6)):0;if(a.support.csstransforms&&"-moz-"===o)this.$elem.css(p,"matrix("+r+", "+s+", "+t+", "+u+", "+v+"px, "+w+"px)");else if(a.support.csstransforms)this.$elem.css(p,"matrix("+r+", "+s+", "+t+", "+u+", "+v+", "+w+")");else if(a.browser.msie){var x=", FilterType='nearest neighbor'",y=this.$elem[0].style,z="progid:DXImageTransform.Microsoft.Matrix(M11="+r+", M12="+t+", M21="+s+", M22="+u+", sizingMethod='auto expand'"+x+")",A=y.filter||a.curCSS(this.$elem[0],"filter")||"";y.filter=j.test(A)?A.replace(j,z):A?A+" "+z:z,this.applyingMatrix=!0,this.matrix=d,this.fixPosition(d,v,w),this.applyingMatrix=!1,this.matrix=null}return!0},origin:function(b,c){if(a.support.csstransforms)return"undefined"==typeof c?this.$elem.css(q,b):this.$elem.css(q,b+" "+c),!0;switch(b){case"left":b="0";break;case"right":b="100%";break;case"center":case d:b="50%"}switch(c){case"top":c="0";break;case"bottom":c="100%";break;case"center":case d:c="50%"}return this.setAttr("origin",[l.test(b)?b:h(this.$elem[0],b)+"px",l.test(c)?c:h(this.$elem[0],c)+"px"]),!0},createTransformFunc:function(b,c){if("reflect"===b.substr(0,7)){var d=c?a.matrix[b]():a.matrix.identity();return"matrix("+d.e(1,1)+", "+d.e(2,1)+", "+d.e(1,2)+", "+d.e(2,2)+", 0, 0)"}return"matrix"==b&&"-moz-"===o&&(c[4]=c[4]?c[4]+"px":0,c[5]=c[5]?c[5]+"px":0),b+"("+(a.isArray(c)?c.join(", "):c)+")"},fixPosition:function(b,c,d){var e=new a.matrix.calc(b,this.safeOuterHeight(),this.safeOuterWidth()),f=this.getAttr("origin"),g=e.originOffset(new a.matrix.V2(l.test(f[0])?parseFloat(f[0])/100*e.outerWidth:parseFloat(f[0]),l.test(f[1])?parseFloat(f[1])/100*e.outerHeight:parseFloat(f[1]))),h=e.sides(),i=this.$elem.css("position");"static"==i&&(i="relative");var j={top:0,left:0},k={position:i,top:g.top+d+h.top+j.top+"px",left:g.left+c+h.left+j.left+"px",zoom:1};this.$elem.css(k)}}}(jQuery,this,this.document),function(a,b,c){function d(){if(e)return e;var a={boxSizing:"box-sizing",MozBoxSizing:"-moz-box-sizing",WebkitBoxSizing:"-webkit-box-sizing",OBoxSizing:"-o-box-sizing"},b=c.body;for(var d in a)if("undefined"!=typeof b.style[d])return e=a[d];return null}a.extend(a.transform.prototype,{safeOuterHeight:function(){return this.safeOuterLength("height")},safeOuterWidth:function(){return this.safeOuterLength("width")},safeOuterLength:function(b){var c="outer"+("width"==b?"Width":"Height");if(!a.support.csstransforms&&a.browser.msie){if(b="width"==b?"width":"height",this.applyingMatrix&&!this[c]&&this.matrix){var e=new a.matrix.calc(this.matrix,1,1),f=e.offset(),g=this.$elem[c]()/f[b];return this[c]=g,g}if(this.applyingMatrix&&this[c])return this[c];var h={height:["top","bottom"],width:["left","right"]},i=this.$elem[0],j=parseFloat(a.curCSS(i,b,!0)),k=this.boxSizingProperty,l=this.boxSizingValue;return this.boxSizingProperty||(k=this.boxSizingProperty=d()||"box-sizing",l=this.boxSizingValue=this.$elem.css(k)||"content-box"),this[c]&&this[b]==j?this[c]:(this[b]=j,!k||"padding-box"!=l&&"content-box"!=l||(j+=parseFloat(a.curCSS(i,"padding-"+h[b][0],!0))||0+parseFloat(a.curCSS(i,"padding-"+h[b][1],!0))||0),k&&"content-box"==l&&(j+=parseFloat(a.curCSS(i,"border-"+h[b][0]+"-width",!0))||0+parseFloat(a.curCSS(i,"border-"+h[b][1]+"-width",!0))||0),this[c]=j,j)}return this.$elem[c]()}});var e=null}(jQuery,this,this.document),function(a){var b=/([\w\-]*?)\((.*?)\)/g,c="data-transform",d=/\s/,e=/,\s?/;a.extend(a.transform.prototype,{setAttrs:function(b){var d,e="";for(var f in b)d=b[f],a.isArray(d)&&(d=d.join(", ")),e+=" "+f+"("+d+")";this.attr=a.trim(e),this.$elem.attr(c,this.attr)},setAttr:function(d,e){a.isArray(e)&&(e=e.join(", "));var f=this.attr||this.$elem.attr(c);if(f&&-1!=f.indexOf(d)){var g,h=[];for(b.lastIndex=0;g=b.exec(f);)h.push(d==g[1]?d+"("+e+")":g[0]);this.attr=h.join(" "),this.$elem.attr(c,this.attr)}else this.attr=a.trim(f+" "+d+"("+e+")"),this.$elem.attr(c,this.attr)},getAttrs:function(){var a=this.attr||this.$elem.attr(c);if(!a)return{};var d,f,g={};for(b.lastIndex=0;null!==(d=b.exec(a));)d&&(f=d[2].split(e),g[d[1]]=1==f.length?f[0]:f);return g},getAttr:function(b){var c=this.getAttrs();return"undefined"!=typeof c[b]?c[b]:"origin"===b&&a.support.csstransforms?this.$elem.css(this.transformOriginProperty).split(d):"origin"===b?["50%","50%"]:a.cssDefault[b]||0}}),"undefined"==typeof a.cssAngle&&(a.cssAngle={}),a.extend(a.cssAngle,{rotate:!0,skew:!0,skewX:!0,skewY:!0}),"undefined"==typeof a.cssDefault&&(a.cssDefault={}),a.extend(a.cssDefault,{scale:[1,1],scaleX:1,scaleY:1,matrix:[1,0,0,1,0,0],origin:["50%","50%"],reflect:[1,0,0,1,0,0],reflectX:[1,0,0,1,0,0],reflectXY:[1,0,0,1,0,0],reflectY:[1,0,0,1,0,0]}),"undefined"==typeof a.cssMultipleValues&&(a.cssMultipleValues={}),a.extend(a.cssMultipleValues,{matrix:6,origin:{length:2,duplicate:!0},reflect:6,reflectX:6,reflectXY:6,reflectY:6,scale:{length:2,duplicate:!0},skew:2,translate:2}),a.extend(a.cssNumber,{matrix:!0,reflect:!0,reflectX:!0,reflectXY:!0,reflectY:!0,scale:!0,scaleX:!0,scaleY:!0}),a.each(a.transform.funcs,function(b,c){a.cssHooks[c]={set:function(b,d){var e=b.transform||new a.transform(b),f={};f[c]=d,e.exec(f,{preserve:!0})},get:function(b){var d=b.transform||new a.transform(b);return d.getAttr(c)}}}),a.each(["reflect","reflectX","reflectXY","reflectY"],function(b,c){a.cssHooks[c].get=function(b){var d=b.transform||new a.transform(b);return d.getAttr("matrix")||a.cssDefault[c]}})}(jQuery,this,this.document),function(a){function b(b,c){null!=b[c]&&(!b.style||null==b.style[c]);var d=parseFloat(a.css(b,c));return d&&d>-1e4?d:0}var c=/^([+\-]=)?([\d+.\-]+)(.*)$/,d=a.fn.animate;a.fn.animate=function(b,c,e,f){var g=a.speed(c,e,f),h=a.cssMultipleValues;return g.complete=g.old,a.isEmptyObject(b)||("undefined"==typeof g.original&&(g.original={}),a.each(b,function(c,d){if(h[c]||a.cssAngle[c]||!a.cssNumber[c]&&-1!==a.inArray(c,a.transform.funcs)){var e=null;if(jQuery.isArray(b[c])){var f=1,i=d.length;h[c]&&(f="undefined"==typeof h[c].length?h[c]:h[c].length),(i>f||f>i&&2==i||2==i&&2==f&&isNaN(parseFloat(d[i-1])))&&(e=d[i-1],d.splice(i-1,1))}g.original[c]=d.toString(),b[c]=parseFloat(d)}})),d.apply(this,[arguments[0],g])};var e="paddingBottom",f=a.fx.prototype.custom;a.fx.prototype.custom=function(d,g,h){var i=a.cssMultipleValues[this.prop],j=a.cssAngle[this.prop];if(i||!a.cssNumber[this.prop]&&-1!==a.inArray(this.prop,a.transform.funcs)){this.values=[],i||(i=1);var k=this.options.original[this.prop],l=a(this.elem).css(this.prop),m=a.cssDefault[this.prop]||0;a.isArray(l)||(l=[l]),a.isArray(k)||(k="string"===a.type(k)?k.split(","):[k]);for(var n=i.length||i,o=0;k.length<n;)k.push(i.duplicate?k[0]:m[o]||0),o++;var p,q,r,s=this,t=s.elem.transform;orig=a.style(s.elem,e),a.each(k,function(d,f){p=l[d]?l[d]:m[d]&&!i.duplicate?m[d]:i.duplicate?l[0]:0,j?p=a.angle.toDegree(p):a.cssNumber[s.prop]||(q=c.exec(a.trim(p)),q[3]&&"px"!==q[3]&&("%"===q[3]?p=parseFloat(q[2])/100*t["safeOuter"+(d?"Height":"Width")]():(a.style(s.elem,e,p),p=b(s.elem,e),a.style(s.elem,e,orig)))),p=parseFloat(p),q=c.exec(a.trim(f)),q?(r=parseFloat(q[2]),h=q[3]||"px",j?(r=a.angle.toDegree(r+h),h="deg"):a.cssNumber[s.prop]||"%"!==h?a.cssNumber[s.prop]||"px"===h||(a.style(s.elem,e,(r||1)+h),p=(r||1)/b(s.elem,e)*p,a.style(s.elem,e,orig)):p=p/t["safeOuter"+(d?"Height":"Width")]()*100,q[1]&&(r=("-="===q[1]?-1:1)*r+p)):(r=f,h=""),s.values.push({start:p,end:r,unit:h})})}return f.apply(this,arguments)},a.fx.multipleValueStep={_default:function(b){a.each(b.values,function(a,c){b.values[a].now=c.start+(c.end-c.start)*b.pos})}},a.each(["matrix","reflect","reflectX","reflectXY","reflectY"],function(b,c){a.fx.multipleValueStep[c]=function(b){var c=b.decomposed,d=a.matrix;m=d.identity(),c.now={},a.each(c.start,function(a){return c.now[a]=parseFloat(c.start[a])+(parseFloat(c.end[a])-parseFloat(c.start[a]))*b.pos,("scaleX"===a||"scaleY"===a)&&1===c.now[a]||"scaleX"!==a&&"scaleY"!==a&&0===c.now[a]?!0:void(m=m.x(d[a](c.now[a])))});var e;a.each(b.values,function(a){switch(a){case 0:e=parseFloat(m.e(1,1).toFixed(6));break;case 1:e=parseFloat(m.e(2,1).toFixed(6));break;case 2:e=parseFloat(m.e(1,2).toFixed(6));break;case 3:e=parseFloat(m.e(2,2).toFixed(6));break;case 4:e=parseFloat(m.e(1,3).toFixed(6));break;case 5:e=parseFloat(m.e(2,3).toFixed(6))}b.values[a].now=e})}}),a.each(a.transform.funcs,function(b,c){a.fx.step[c]=function(b){var d=b.elem.transform||new a.transform(b.elem),e={};a.cssMultipleValues[c]||!a.cssNumber[c]&&-1!==a.inArray(c,a.transform.funcs)?((a.fx.multipleValueStep[b.prop]||a.fx.multipleValueStep._default)(b),e[b.prop]=[],a.each(b.values,function(c,d){e[b.prop].push(d.now+(a.cssNumber[b.prop]?"":d.unit))})):e[b.prop]=b.now+(a.cssNumber[b.prop]?"":b.unit),d.exec(e,{preserve:!0})}}),a.each(["matrix","reflect","reflectX","reflectXY","reflectY"],function(b,c){a.fx.step[c]=function(b){var d=b.elem.transform||new a.transform(b.elem),e={};if(!b.initialized){if(b.initialized=!0,"matrix"!==c){var f,g=a.matrix[c]().elements;a.each(b.values,function(a){switch(a){case 0:f=g[0];break;case 1:f=g[2];break;case 2:f=g[1];break;case 3:f=g[3];break;default:f=0}b.values[a].end=f})}b.decomposed={};var h=b.values;b.decomposed.start=a.matrix.matrix(h[0].start,h[1].start,h[2].start,h[3].start,h[4].start,h[5].start).decompose(),b.decomposed.end=a.matrix.matrix(h[0].end,h[1].end,h[2].end,h[3].end,h[4].end,h[5].end).decompose()}(a.fx.multipleValueStep[b.prop]||a.fx.multipleValueStep._default)(b),e.matrix=[],a.each(b.values,function(a,b){e.matrix.push(b.now)}),d.exec(e,{preserve:!0})}})}(jQuery,this,this.document),function(a){var b=180/Math.PI,c=200/Math.PI,d=Math.PI/180,e=2/1.8,f=.9,g=Math.PI/200,h=/^([+\-]=)?([\d+.\-]+)(.*)$/;a.extend({angle:{runit:/(deg|g?rad)/,radianToDegree:function(a){return a*b},radianToGrad:function(a){return a*c},degreeToRadian:function(a){return a*d},degreeToGrad:function(a){return a*e},gradToDegree:function(a){return a*f},gradToRadian:function(a){return a*g},toDegree:function(b){var c=h.exec(b);if(c){switch(b=parseFloat(c[2]),c[3]||"deg"){case"grad":b=a.angle.gradToDegree(b);break;case"rad":b=a.angle.radianToDegree(b)}return b}return 0}}})}(jQuery,this,this.document),function(a){"undefined"==typeof a.matrix&&a.extend({matrix:{}});var b=a.matrix;a.extend(b,{V2:function(b,c){this.elements=a.isArray(arguments[0])?arguments[0].slice(0,2):[b,c],this.length=2},V3:function(b,c,d){this.elements=a.isArray(arguments[0])?arguments[0].slice(0,3):[b,c,d],this.length=3},M2x2:function(){this.elements=a.isArray(arguments[0])?arguments[0].slice(0,4):Array.prototype.slice.call(arguments).slice(0,4),this.rows=2,this.cols=2},M3x3:function(){this.elements=a.isArray(arguments[0])?arguments[0].slice(0,9):Array.prototype.slice.call(arguments).slice(0,9),this.rows=3,this.cols=3}});var c={e:function(a,b){var c=this.rows,d=this.cols;return a>c||b>c||1>a||1>b?0:this.elements[(a-1)*d+b-1]},decompose:function(){var b=this.e(1,1),c=this.e(2,1),d=this.e(1,2),e=this.e(2,2),f=this.e(1,3),g=this.e(2,3);if(Math.abs(b*e-c*d)<.01)return{rotate:"0deg",skewX:"0deg",scaleX:1,scaleY:1,translateX:"0px",translateY:"0px"};var h=f,i=g,j=Math.sqrt(b*b+c*c);b/=j,c/=j;var k=b*d+c*e;d-=b*k,e-=c*k;var l=Math.sqrt(d*d+e*e);d/=l,e/=l,k/=l,0>b*e-c*d&&(b=-b,c=-c,j=-j);var m=a.angle.radianToDegree,n=m(Math.atan2(c,b));return k=m(Math.atan(k)),{rotate:n+"deg",skewX:k+"deg",scaleX:j,scaleY:l,translateX:h+"px",translateY:i+"px"}}};a.extend(b.M2x2.prototype,c,{toM3x3:function(){var a=this.elements;return new b.M3x3(a[0],a[1],0,a[2],a[3],0,0,0,1)},x:function(a){var c="undefined"==typeof a.rows;if(!c&&3==a.rows)return this.toM3x3().x(a);var d=this.elements,e=a.elements;return c&&2==e.length?new b.V2(d[0]*e[0]+d[1]*e[1],d[2]*e[0]+d[3]*e[1]):e.length==d.length?new b.M2x2(d[0]*e[0]+d[1]*e[2],d[0]*e[1]+d[1]*e[3],d[2]*e[0]+d[3]*e[2],d[2]*e[1]+d[3]*e[3]):!1},inverse:function(){var a=1/this.determinant(),c=this.elements;return new b.M2x2(a*c[3],a*-c[1],a*-c[2],a*c[0])},determinant:function(){var a=this.elements;return a[0]*a[3]-a[1]*a[2]}}),a.extend(b.M3x3.prototype,c,{x:function(a){var c="undefined"==typeof a.rows;!c&&a.rows<3&&(a=a.toM3x3());var d=this.elements,e=a.elements;return c&&3==e.length?new b.V3(d[0]*e[0]+d[1]*e[1]+d[2]*e[2],d[3]*e[0]+d[4]*e[1]+d[5]*e[2],d[6]*e[0]+d[7]*e[1]+d[8]*e[2]):e.length==d.length?new b.M3x3(d[0]*e[0]+d[1]*e[3]+d[2]*e[6],d[0]*e[1]+d[1]*e[4]+d[2]*e[7],d[0]*e[2]+d[1]*e[5]+d[2]*e[8],d[3]*e[0]+d[4]*e[3]+d[5]*e[6],d[3]*e[1]+d[4]*e[4]+d[5]*e[7],d[3]*e[2]+d[4]*e[5]+d[5]*e[8],d[6]*e[0]+d[7]*e[3]+d[8]*e[6],d[6]*e[1]+d[7]*e[4]+d[8]*e[7],d[6]*e[2]+d[7]*e[5]+d[8]*e[8]):!1},inverse:function(){var a=1/this.determinant(),c=this.elements;return new b.M3x3(a*(c[8]*c[4]-c[7]*c[5]),a*-(c[8]*c[1]-c[7]*c[2]),a*(c[5]*c[1]-c[4]*c[2]),a*-(c[8]*c[3]-c[6]*c[5]),a*(c[8]*c[0]-c[6]*c[2]),a*-(c[5]*c[0]-c[3]*c[2]),a*(c[7]*c[3]-c[6]*c[4]),a*-(c[7]*c[0]-c[6]*c[1]),a*(c[4]*c[0]-c[3]*c[1]))},determinant:function(){var a=this.elements;return a[0]*(a[8]*a[4]-a[7]*a[5])-a[3]*(a[8]*a[1]-a[7]*a[2])+a[6]*(a[5]*a[1]-a[4]*a[2])}});var d={e:function(a){return this.elements[a-1]}};a.extend(b.V2.prototype,d),a.extend(b.V3.prototype,d)}(jQuery,this,this.document),function(a){"undefined"==typeof a.matrix&&a.extend({matrix:{}}),a.extend(a.matrix,{calc:function(a,b,c){this.matrix=a,this.outerHeight=b,this.outerWidth=c}}),a.matrix.calc.prototype={coord:function(b,c,d){d="undefined"!=typeof d?d:0;var e,f=this.matrix;switch(f.rows){case 2:e=f.x(new a.matrix.V2(b,c));break;case 3:e=f.x(new a.matrix.V3(b,c,d))}return e},corners:function(a,b){var c,d=!("undefined"!=typeof a||"undefined"!=typeof b);return this.c&&d?c=this.c:(b=b||this.outerHeight,a=a||this.outerWidth,c={tl:this.coord(0,0),bl:this.coord(0,b),tr:this.coord(a,0),br:this.coord(a,b)}),d&&(this.c=c),c},sides:function(a){var b=a||this.corners();return{top:Math.min(b.tl.e(2),b.tr.e(2),b.br.e(2),b.bl.e(2)),bottom:Math.max(b.tl.e(2),b.tr.e(2),b.br.e(2),b.bl.e(2)),left:Math.min(b.tl.e(1),b.tr.e(1),b.br.e(1),b.bl.e(1)),right:Math.max(b.tl.e(1),b.tr.e(1),b.br.e(1),b.bl.e(1))}},offset:function(a){var b=this.sides(a);return{height:Math.abs(b.bottom-b.top),width:Math.abs(b.right-b.left)}},area:function(a){var b=a||this.corners(),c={x:b.tr.e(1)-b.tl.e(1)+b.br.e(1)-b.bl.e(1),y:b.tr.e(2)-b.tl.e(2)+b.br.e(2)-b.bl.e(2)},d={x:b.bl.e(1)-b.tl.e(1)+b.br.e(1)-b.tr.e(1),y:b.bl.e(2)-b.tl.e(2)+b.br.e(2)-b.tr.e(2)};return.25*Math.abs(c.e(1)*d.e(2)-c.e(2)*d.e(1))},nonAffinity:function(){var a=this.sides(),b=a.top-a.bottom,c=a.left-a.right;return parseFloat(parseFloat(Math.abs((Math.pow(b,2)+Math.pow(c,2))/(a.top*a.bottom+a.left*a.right))).toFixed(8))},originOffset:function(b,c){b=b?b:new a.matrix.V2(.5*this.outerWidth,.5*this.outerHeight),c=c?c:new a.matrix.V2(0,0);var d=this.coord(b.e(1),b.e(2)),e=this.coord(c.e(1),c.e(2));return{top:e.e(2)-c.e(2)-(d.e(2)-b.e(2)),left:e.e(1)-c.e(1)-(d.e(1)-b.e(1))}}}}(jQuery,this,this.document),function(a){"undefined"==typeof a.matrix&&a.extend({matrix:{}});var b=a.matrix,c=b.M2x2,d=b.M3x3;a.extend(b,{identity:function(a){a=a||2;for(var c=a*a,d=new Array(c),e=a+1,f=0;c>f;f++)d[f]=f%e===0?1:0;return new b["M"+a+"x"+a](d)},matrix:function(){var a=Array.prototype.slice.call(arguments);switch(arguments.length){case 4:return new c(a[0],a[2],a[1],a[3]);case 6:return new d(a[0],a[2],a[4],a[1],a[3],a[5],0,0,1)}},reflect:function(){return new c(-1,0,0,-1)},reflectX:function(){return new c(1,0,0,-1)},reflectXY:function(){return new c(0,1,1,0)},reflectY:function(){return new c(-1,0,0,1)},rotate:function(b){var d=a.angle.degreeToRadian(b),e=Math.cos(d),f=Math.sin(d),g=e,h=f,i=-f,j=e;return new c(g,i,h,j)},scale:function(a,b){return a=a||0===a?a:1,b=b||0===b?b:a,new c(a,0,0,b)},scaleX:function(a){return b.scale(a,1)},scaleY:function(a){return b.scale(1,a)},skew:function(b,d){b=b||0,d=d||0;var e=a.angle.degreeToRadian(b),f=a.angle.degreeToRadian(d),g=Math.tan(e),h=Math.tan(f);return new c(1,g,h,1)},skewX:function(a){return b.skew(a)},skewY:function(a){return b.skew(0,a)},translate:function(a,b){return a=a||0,b=b||0,new d(1,0,a,0,1,b,0,0,1)},translateX:function(a){return b.translate(a)},translateY:function(a){return b.translate(0,a)}})}(jQuery,this,this.document);var Hashtable=function(){function a(b){var c;if("string"==typeof b)return b;if(typeof b.hashCode==k)return c=b.hashCode(),"string"==typeof c?c:a(c);if(typeof b.toString==k)return b.toString();try{return String(b)}catch(d){return Object.prototype.toString.call(b)}}function b(a,b){return a.equals(b)}function c(a,b){return typeof b.equals==k?b.equals(a):a===b}function d(a){return function(b){if(null===b)throw new Error("null is not a valid "+a);if("undefined"==typeof b)throw new Error(a+" must not be undefined")}}function e(a,b,c,d){this[0]=a,this.entries=[],this.addEntry(b,c),null!==d&&(this.getEqualityFunction=function(){return d})}function f(a){return function(b){for(var c,d=this.entries.length,e=this.getEqualityFunction(b);d--;)if(c=this.entries[d],e(b,c[0]))switch(a){case o:return!0;case p:return c;case q:return[d,c[1]]}return!1}}function g(a){return function(b){for(var c=b.length,d=0,e=this.entries.length;e>d;++d)b[c+d]=this.entries[d][a]}}function h(a,b){for(var c,d=a.length;d--;)if(c=a[d],b===c[0])return d;return null}function i(a,b){var c=a[b];return c&&c instanceof e?c:null}function j(b,c){var d=this,f=[],g={},o=typeof b==k?b:a,p=typeof c==k?c:null;this.put=function(a,b){m(a),n(b);var c,d,h=o(a),j=null;return c=i(g,h),c?(d=c.getEntryForKey(a),d?(j=d[1],d[1]=b):c.addEntry(a,b)):(c=new e(h,a,b,p),f[f.length]=c,g[h]=c),j},this.get=function(a){m(a);var b=o(a),c=i(g,b);if(c){var d=c.getEntryForKey(a);if(d)return d[1]}return null},this.containsKey=function(a){m(a);var b=o(a),c=i(g,b);return c?c.containsKey(a):!1},this.containsValue=function(a){n(a);for(var b=f.length;b--;)if(f[b].containsValue(a))return!0;return!1},this.clear=function(){f.length=0,g={}},this.isEmpty=function(){return!f.length};var q=function(a){return function(){for(var b=[],c=f.length;c--;)f[c][a](b);return b}};this.keys=q("keys"),this.values=q("values"),this.entries=q("getEntries"),this.remove=function(a){m(a);var b,c=o(a),d=null,e=i(g,c);return e&&(d=e.removeEntryForKey(a),null!==d&&(e.entries.length||(b=h(f,c),l(f,b),delete g[c]))),d},this.size=function(){for(var a=0,b=f.length;b--;)a+=f[b].entries.length;return a},this.each=function(a){for(var b,c=d.entries(),e=c.length;e--;)b=c[e],a(b[0],b[1])},this.putAll=function(a,b){for(var c,e,f,g,h=a.entries(),i=h.length,j=typeof b==k;i--;)c=h[i],e=c[0],f=c[1],j&&(g=d.get(e))&&(f=b(e,g,f)),d.put(e,f)},this.clone=function(){var a=new j(b,c);return a.putAll(d),a}}var k="function",l=typeof Array.prototype.splice==k?function(a,b){a.splice(b,1)}:function(a,b){var c,d,e;if(b===a.length-1)a.length=b;else for(c=a.slice(b+1),a.length=b,d=0,e=c.length;e>d;++d)a[b+d]=c[d]},m=d("key"),n=d("value"),o=0,p=1,q=2;return e.prototype={getEqualityFunction:function(a){return typeof a.equals==k?b:c},getEntryForKey:f(p),getEntryAndIndexForKey:f(q),removeEntryForKey:function(a){var b=this.getEntryAndIndexForKey(a);return b?(l(this.entries,b[0]),b[1]):null},addEntry:function(a,b){this.entries[this.entries.length]=[a,b]},keys:g(0),values:g(1),getEntries:function(a){for(var b=a.length,c=0,d=this.entries.length;d>c;++c)a[b+c]=this.entries[c].slice(0)},containsKey:f(o),containsValue:function(a){for(var b=this.entries.length;b--;)if(a===this.entries[b][1])return!0;return!1}},j}();!function(a){function b(a,b,c){this.dec=a,this.group=b,this.neg=c}function c(){for(var a=0;a<k.length;a++)for(var b=k[a],c=0;c<b.length;c++)e.put(b[c],a)}function d(a,d){0==e.size()&&c();var f=".",g=",",h="-";0==d&&(-1!=a.indexOf("_")?a=a.split("_")[1].toLowerCase():-1!=a.indexOf("-")&&(a=a.split("-")[1].toLowerCase()));var i=e.get(a);if(i){var k=j[i];k&&(f=k[0],g=k[1])}return new b(f,g,h)}var e=new Hashtable,f=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],g=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],h=["bg","cz","fi","fr","no","pl","ru","se"],i=["ch"],j=[[".",","],[",","."],[","," "],[".","'"]],k=[f,g,h,i];a.fn.formatNumber=function(b,c,d){return this.each(function(){null==c&&(c=!0),null==d&&(d=!0);var e;e=new String(a(this).is(":input")?a(this).val():a(this).text());var f=a.formatNumber(e,b);return c&&(a(this).is(":input")?a(this).val(f):a(this).text(f)),d?f:void 0})},a.formatNumber=function(b,c){for(var c=a.extend({},a.fn.formatNumber.defaults,c),e=d(c.locale.toLowerCase(),c.isFullLocale),f=(e.dec,e.group,e.neg,"0#-,."),g="",h=!1,i=0;i<c.format.length;i++){if(-1!=f.indexOf(c.format.charAt(i))){if(0==i&&"-"==c.format.charAt(i)){h=!0;continue}break}g+=c.format.charAt(i)}for(var j="",i=c.format.length-1;i>=0&&-1==f.indexOf(c.format.charAt(i));i--)j=c.format.charAt(i)+j;c.format=c.format.substring(g.length),c.format=c.format.substring(0,c.format.length-j.length);var k=new Number(b);return a._formatNumber(k,c,j,g,h)},a._formatNumber=function(b,c,e,f,g){var c=a.extend({},a.fn.formatNumber.defaults,c),h=d(c.locale.toLowerCase(),c.isFullLocale),i=h.dec,j=h.group,k=h.neg;null!=c.overrideGroupSep&&(j=c.overrideGroupSep),null!=c.overrideDecSep&&(i=c.overrideDecSep),null!=c.overrideNegSign&&(k=c.overrideNegSign);var l=!1;if(isNaN(b)){if(1!=c.nanForceZero)return"";b=0,l=!0}(1==c.isPercentage||c.autoDetectPercentage&&"%"==e.charAt(e.length-1))&&(b=100*b);var m="";if(c.format.indexOf(".")>-1){var n=i,o=c.format.substring(c.format.lastIndexOf(".")+1);if(1==c.round)b=new Number(b.toFixed(o.length));else{var p=b.toString();p.lastIndexOf(".")>0&&(p=p.substring(0,p.lastIndexOf(".")+o.length+1)),b=new Number(p)}var q=new Number(b.toString().substring(b.toString().indexOf(".")));decimalString=new String(q.toFixed(o.length)),decimalString=decimalString.substring(decimalString.lastIndexOf(".")+1);for(var r=0;r<o.length;r++)if("#"!=o.charAt(r)||"0"==decimalString.charAt(r)){if("#"==o.charAt(r)&&"0"==decimalString.charAt(r)){var s=decimalString.substring(r);if(s.match("[1-9]")){n+=decimalString.charAt(r);continue}break}"0"==o.charAt(r)&&(n+=decimalString.charAt(r))}else n+=decimalString.charAt(r);m+=n}else b=Math.round(b);var t=Math.floor(b);0>b&&(t=Math.ceil(b));var u="";u=-1==c.format.indexOf(".")?c.format:c.format.substring(0,c.format.indexOf("."));var v="";if(0!=t||"#"!=u.substr(u.length-1)||l){var w=new String(Math.abs(t)),x=9999;-1!=u.lastIndexOf(",")&&(x=u.length-u.lastIndexOf(",")-1);for(var y=0,r=w.length-1;r>-1;r--)v=w.charAt(r)+v,y++,y==x&&0!=r&&(v=j+v,y=0);if(u.length>v.length){var z=u.indexOf("0");if(-1!=z)for(var A=u.length-z,B=u.length-v.length-1;v.length<A;){var C=u.charAt(B);","==C&&(C=j),v=C+v,B--}}}return v||-1===u.indexOf("0",u.length-1)||(v="0"),m=v+m,0>b&&g&&f.length>0?f=k+f:0>b&&(m=k+m),c.decimalSeparatorAlwaysShown||m.lastIndexOf(i)==m.length-1&&(m=m.substring(0,m.length-1)),m=f+m+e},a.fn.parseNumber=function(b,c,d){null==c&&(c=!0),null==d&&(d=!0);var e;e=new String(a(this).is(":input")?a(this).val():a(this).text());var f=a.parseNumber(e,b);return f&&(c&&(a(this).is(":input")?a(this).val(f.toString()):a(this).text(f.toString())),d)?f:void 0},a.parseNumber=function(b,c){var c=a.extend({},a.fn.parseNumber.defaults,c),e=d(c.locale.toLowerCase(),c.isFullLocale),f=e.dec,g=e.group,h=e.neg;null!=c.overrideGroupSep&&(g=c.overrideGroupSep),null!=c.overrideDecSep&&(f=c.overrideDecSep),null!=c.overrideNegSign&&(h=c.overrideNegSign);for(var i="1234567890",j=".-",k=c.strict;b.indexOf(g)>-1;)b=b.replace(g,"");b=b.replace(f,".").replace(h,"-");var l="",m=!1;(1==c.isPercentage||c.autoDetectPercentage&&"%"==b.charAt(b.length-1))&&(m=!0);for(var n=0;n<b.length;n++)if(i.indexOf(b.charAt(n))>-1)l+=b.charAt(n);else if(j.indexOf(b.charAt(n))>-1)l+=b.charAt(n),j=j.replace(b.charAt(n),"");else{if(c.allowPostfix)break;if(k){l="NaN";break}}var o=new Number(l);if(m){o/=100;var p=l.indexOf(".");if(-1!=p){var q=l.length-p-1;o=o.toFixed(q+2)}else o=o.toFixed(2)}return o},a.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,autoDetectPercentage:!0,isFullLocale:!1,strict:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,allowPostfix:!1},a.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,isPercentage:!1,autoDetectPercentage:!0},Number.prototype.toFixed=function(b){return a._roundNumber(this,b)},a._roundNumber=function(a,b){var c=Math.pow(10,b||0),d=String(Math.round(a*c)/c);if(b>0){var e=d.indexOf(".");for(-1==e?(d+=".",e=0):e=d.length-(e+1);b>e;)d+="0",e++}return d}}(jQuery),function(a){var b=function(b,c){var d=this;this.id=Math.floor(1e3*Math.random())+1,this.$ele=b,this.options=a.extend({},this.defaults,c),this.options.transform=this.options.transform&&a.transform,this.$div=a("<div></div>"),this.$div.attr("class","flapper "+this.$ele.attr("class")),this.$ele.hide().after(this.$div),this.$ele.bind("change.flapper",function(){d.update()}),this.init()};b.prototype={defaults:{width:6,format:null,align:"right",padding:" ",chars:null,chars_preset:"num",timing:250,min_timing:10,threshhold:100,transform:!0,on_anim_start:null,on_anim_end:null},init:function(){var a=this;for(this.digits=[],i=0;i<this.options.width;i++)this.digits[i]=new FlapDigit(null,this.options),this.$div.append(this.digits[i].$ele);this.$div.on("digitAnimEnd",function(b){a.onDigitAnimEnd(b)}),this.options.on_anim_start&&this.$div.on("animStart",this.options.on_anim_start),this.options.on_anim_end&&this.$div.on("animEnd",this.options.on_anim_end),this.update()},update:function(){var a=this.$ele.val().replace(/[\s|\u00a0]/g," "),b=this.getDigits(a);this.digitsFinished=0,this.$div.trigger("animStart");for(var c=0;c<this.digits.length;c++)this.digits[c].goToChar(b[c])},onDigitAnimEnd:function(){this.digitsFinished++,this.digitsFinished==this.options.width&&this.$div.trigger("animEnd")},getDigits:function(b){var c=b+"";this.options.format&&(c=a.formatNumber(b,this.options.format));var d=c.split("");if(d.length<this.options.width)for(;d.length<this.options.width;)"left"==this.options.align?d.push(this.options.padding):d.unshift(this.options.padding);else if(d.length>this.options.width){var e=d.length-this.options.width;"left"==this.options.align?d.splice(-1,e):d.splice(0,e)}return d}},FlapDigit=function(b,c){this.options=c,this.options.chars||(this.options.chars=this.presets[this.options.chars_preset]),this.pos=0,this.timeout,this.$ele=b?b:a(this.htmlTemplate),this.$prev=this.$ele.find(".front.top, .back.bottom"),this.$next=this.$ele.find(".back.top, .front.bottom"),this.$back_top=this.$ele.find(".back.top"),this.$back_bottom=this.$ele.find(".back.bottom"),this.$front_top=this.$ele.find(".front.top"),this.$front_bottom=this.$ele.find(".front.bottom"),this.initialize()},FlapDigit.prototype={presets:{num:[" ","1","2","3","4","5","6","7","8","9","0"],hexnum:[" ","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","0"],alpha:[" ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],alphanum:[" ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0"]},initialize:function(){this.$prev.html(this.options.chars[0]),this.$next.html(this.options.chars[0])},htmlTemplate:'<div class="digit"><div class="back top">&nbsp;</div><div class="back bottom">&nbsp;</div><div class="front top">&nbsp;</div><div class="front bottom">&nbsp;</div></div>',increment:function(a){var b=this.pos+1;b>=this.options.chars.length&&(b=0),this.$prev.html(this.options.chars[this.pos]).show(),this.$front_bottom.hide(),this.$next.html(this.options.chars[b]);
var c=Math.floor(Math.random()*a*.4+.3*a),d=Math.floor(Math.random()*a*.1+.2*a);a>=this.options.threshhold&&(this.options.transform?this.animateSlow(c,d):this.animateFast(c,d)),this.pos=b},animateSlow:function(a,b){var c=this;this.$back_top.show(),this.$front_bottom.transform({scaleY:0}),this.$front_top.transform({scaleY:1}).stop().show().animate({scaleY:0},a,"swing",function(){c.$front_bottom.stop().show().animate({scaleY:1},b,"linear"),c.$front_top.hide().transform({scaleY:1})})},animateFast:function(a,b){var c=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){c.$front_top.hide(),c.timeout=setTimeout(function(){c.$front_bottom.show()},b)},a)},goToPosition:function(a){var b=this,c=function(){b.timing_timer&&(clearInterval(b.timing_timer),b.timing_timer=null);var d=a-b.pos;if(0>d&&(d+=b.options.chars.length),b.pos==a)clearInterval(b.timing_timer),b.timing_timer=null,b.$ele.trigger("digitAnimEnd");else{var e=Math.floor((b.options.timing-b.options.min_timing)/d+b.options.min_timing);b.increment(e),b.timing_timer=setTimeout(c,e)}};c()},goToChar:function(b){var c=a.inArray(b,this.options.chars);-1==c&&(this.options.chars.push(b),c=this.options.chars.length-1),this.goToPosition(c)}},a.fn.flapper=function(c){return this.each(function(){new b(a(this),c)}),this}}(jQuery);